System.register(["../../@rhelements/rhelement/rhelement.js","./rhdp-search-filter-group.js","./rhdp-search-filter-item.js"],function(e,t){"use strict";var r,o,a,c,n,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t&&t.id;return{setters:[function(e){o=e},function(e){a=e},function(e){c=e}],execute:function(){n=function(t){function o(){var e=t.call(this,o,{delayRender:!0})||this;return e._type="",e._title="Filter By",e._toggle=!1,e._toggleModal=e._toggleModal.bind(e),e._clearFilters=e._clearFilters.bind(e),e}return i(o,t),Object.defineProperty(o.prototype,"html",{get:function(){return'\n        <style>\n            :host {\n                display: none;\n            }\n        </style>\n        <div class="cover" id="cover">\n            <div class="title">'+this.title+' <a href="#" class="cancel" id="cancel">Close</a></div>\n            <div class="groups">\n            <slot></slot>\n            </div>\n            <div class="footer">\n            <a href="#" class="clearFilters">Clear Filters</a> \n            <a href="#" class="applyFilters">Apply</a>\n            </div>\n        </div>'},enumerable:!0,configurable:!0}),Object.defineProperty(o,"tag",{get:function(){return"rhdp-search-modal-filters"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters!==e&&(this._filters=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"toggle",{get:function(){return this._toggle},set:function(e){this._toggle!==e&&(this._toggle=e,this._toggle?(this.shadowRoot.querySelector(".cover").className="cover modal",window.scrollTo(0,0),document.body.style.overflow="hidden",this.style.height=window.innerHeight+"px"):(this.shadowRoot.querySelector(".cover").className="cover",document.body.style.overflow="auto"))},enumerable:!0,configurable:!0}),o.prototype.connectedCallback=function(){var o=this;t.prototype.connectedCallback.call(this),this.addGroups(),this.shadowRoot.addEventListener("click",function(e){var t={bubbles:!0,composed:!0};switch(e.target.className){case"showBtn":case"cancel":case"applyFilters":e.preventDefault(),o.dispatchEvent(new CustomEvent("toggle-modal",t));break;case"clearFilters":e.preventDefault(),o.dispatchEvent(new CustomEvent("clear-filters",t));break;case"more":e.preventDefault()}}),top.addEventListener("toggle-modal",this._toggleModal),t.prototype.render.call(this)},Object.defineProperty(o,"observedAttributes",{get:function(){return["type","title","toggle"]},enumerable:!0,configurable:!0}),o.prototype.attributeChangedCallback=function(e,t,o){this[e]=o},o.prototype.addGroups=function(){for(var e=this.filters&&this.filters.facets?this.filters.facets:[],t=e.length,o=0;o<t;o++){for(var r=new a.default,n=e[o],i=n.items.length,s=0;s<i;s++){var l=new c.default;l.name=n.items[s].name,l.value=n.items[s].value,l.active=n.items[s].active,l.key=n.items[s].key,l.group=n.key,r.items.push(l)}r.key=n.key,r.name=n.name,this.shadowRoot.querySelector(".groups").appendChild(r)}},o.prototype._toggleModal=function(e){"modal"===this.type&&(this.toggle=!this.toggle)},o.prototype.applyFilters=function(){this.dispatchEvent(new CustomEvent("apply-filters",{bubbles:!0,composed:!0}))},o.prototype._clearFilters=function(e){this.style.display="none"},o}(o.default),e("default",n),o.default.create(n)}}});