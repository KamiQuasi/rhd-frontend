System.register(["../../@patternfly/pfelement/pfelement.js","./dp-search-result.js"],function(t,e){"use strict";var i,o,r,n,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});e&&e.id;return{setters:[function(t){o=t},function(t){r=t}],execute:function(){n=function(e){function o(){var t=e.call(this,o,{delayRender:!0})||this;return t._more=!1,t._last=0,t._valid=!0,t._renderResults=t._renderResults.bind(t),t._setLoading=t._setLoading.bind(t),t._checkValid=t._checkValid.bind(t),t._clearResults=t._clearResults.bind(t),t}return s(o,e),Object.defineProperty(o.prototype,"html",{get:function(){return'\n        <style>\n            :host {\n                display: flex;\n                flex-direction: column;\n            }\n\n            [data-hide] {\n                display: none;\n            }\n\n            h4 { \n                font-size: 27px;\n                font-weight: 600;\n                color: #242424;\n                line-height: 1.5;\n                margin-bottom: 16px;\n                margin-top: 16px;\n            }\n\n            p {\n                font-size: 16px;\n                line-height: 1.5;\n                text-align: center;\n            }\n\n            div.moreBtn {\n                text-align: center;\n            }\n\n            a.moreBtn {\n                background-color: #fff;\n                border: 1px solid #06c;\n                color: #06c;\n                display: block;\n                font-weight: 600;\n                line-height: 1.44;\n                margin: 0 auto;\n                max-width: 165px;\n                padding: 8px 35px;\n                text-transform: uppercase;\n                cursor: pointer;\n                text-decoration: none;\n            }\n            a.moreBtn:hover {\n                background-color: #06c;\n                color: #fff;\n            }\n\n            .loading {\n                background: url(https://developers.redhat.com/images/icons/ajax-loader.gif) center 80px no-repeat;\n                min-height: 250px;\n            }\n        </style>\n        <slot></slot>\n        <div class="loading" data-hide></div>\n        <div class="moreBtn" data-hide><a class="moreBtn" href="#">Load More</a></div>\n        <p class="end-of-results" data-hide>- End of Results -</p>\n        <div class="invalidMsg" data-hide>\n        <h4>Well, this is awkward. No search term was entered yet, so this page is a little empty right now.</h4>\n        <p>After you enter a search term in the box above, you will see the results displayed here. \n        You can also use the filters to select a content type, product or topic to see some results too. \n        Try it out!</p>\n        </div>'},enumerable:!0,configurable:!0}),Object.defineProperty(o,"tag",{get:function(){return"dp-search-results"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"results",{get:function(){return this._results},set:function(t){this._results!==t&&(this._results=t,this._renderResults(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"more",{get:function(){return this._more},set:function(t){this._more!==t&&(this._more=t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"last",{get:function(){return this._last},set:function(t){this._last!==t&&(this._last=t||0,this.setAttribute("last",t.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"valid",{get:function(){return this._valid},set:function(t){this._valid!==t&&(this._valid=t)},enumerable:!0,configurable:!0}),o.prototype.connectedCallback=function(){var o=this;e.prototype.connectedCallback.call(this),e.prototype.render.call(this),this.shadowRoot.querySelector("div.moreBtn").addEventListener("click",function(t){t.preventDefault(),o.more=!0;var e={detail:{from:o.last},bubbles:!0,composed:!0};o.dispatchEvent(new CustomEvent("load-more",e))}),top.addEventListener("search-complete",this._renderResults),top.addEventListener("search-start",this._setLoading),top.addEventListener("params-ready",this._checkValid),top.window.addEventListener("popstate",this._clearResults)},o.prototype.addResult=function(t){var e=new r.default;e.result=t,this.appendChild(e)},o.prototype._setLoading=function(t){if(this.shadowRoot.querySelector("div.moreBtn").setAttribute("data-hide",""),this.shadowRoot.querySelector(".invalidMsg").setAttribute("data-hide",""),this.more)this.more=!1;else for(this.last=0;this.firstChild;)this.removeChild(this.firstChild);this.shadowRoot.querySelector(".loading").removeAttribute("data-hide")},o.prototype._renderResults=function(t){if(this.shadowRoot.querySelector(".loading")&&this.shadowRoot.querySelector(".loading").setAttribute("data-hide",""),t.detail&&void 0!==t.detail.results&&void 0===t.detail.invalid)this.addResults(t.detail.results);else{for(;this.firstChild;)this.removeChild(this.firstChild);this.shadowRoot.querySelector(".end-of-results").setAttribute("data-hide",""),this.shadowRoot.querySelector("div.moreBtn").setAttribute("data-hide",""),this.shadowRoot.querySelector(".invalidMsg").removeAttribute("data-hide")}var e={detail:{results:this.results},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("results-loaded",e))},o.prototype._clearResults=function(t){this.results=void 0},o.prototype._checkValid=function(t){var e=t.detail;this.valid=0<Object.keys(e.filters).length||null!==e.term&&""!==e.term&&void 0!==e.term,this.valid?this.shadowRoot.querySelector(".invalidMsg")&&this.shadowRoot.querySelector(".invalidMsg").setAttribute("data-hide",""):this.shadowRoot.querySelector(".invalidMsg").removeAttribute("data-hide")},o.prototype.addResults=function(t){if(t&&t.docs){for(var e=t.docs,o=e.length,i=0;i<o;i++)this.addResult(e[i]);this.last=this.last+o,this.last>=t.numFound&&this.shadowRoot.querySelector(".end-of-results").removeAttribute("data-hide"),0<o&&this.last<t.numFound?(this.shadowRoot.querySelector(".invalidMsg").setAttribute("data-hide",""),this.shadowRoot.querySelector(".end-of-results").setAttribute("data-hide",""),this.shadowRoot.querySelector("div.moreBtn").removeAttribute("data-hide")):(this.shadowRoot.querySelector("div.moreBtn").setAttribute("data-hide",""),this.shadowRoot.querySelector(".end-of-results").removeAttribute("data-hide"))}},o}(o.default),t("default",n),o.default.create(n)}}});