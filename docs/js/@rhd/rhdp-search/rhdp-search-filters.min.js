System.register(["../../@pfelements/pfelement.js","@rhd/rhdp-search/rhdp-search-filter-group","@rhd/rhdp-search/rhdp-search-filter-item"],function(e,t){"use strict";var i,n,a,c,o,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t&&t.id;return{setters:[function(e){n=e},function(e){a=e},function(e){c=e}],execute:function(){o=function(t){function e(){var e=t.call(this,"rhdp-search-filter")||this;return e.template=function(e){var t=document.createElement("template");return t.innerHTML='\n        <style>\n            :host {\n                grid-column: span 3;\n                grid-row: span 5;\n            }\n            .title {\n                background: #e6e7e8; \n                color: #000;\n                text-transform: uppercase;\n                padding: .5em 1em;\n                font-weight: 600;\n            }\n            .cancel { display: none; }\n            .showBtn { \n                display: none;\n                background: #ccc;\n                text-decoration: none;\n                border: 0;\n                height: 40px;\n                font-weight: 600;\n                font-size: 16px;\n                padding: 9px 40px;\n                transition: background .2s ease-in 0s;\n                line-height: 1.2em;\n                cursor: pointer;\n                position: relative;\n                text-align: center;\n                color: #333; \n                width: 100%;\n                }\n            .groups {\n                background-color: #f9f9f9;\n                padding-bottom: 30px;\n            }\n            .active-type {\n                display: flex;\n                flex-direction: row;\n                margin-bottom: 1em;\n                .inline {\n                    font-size: 16px;\n                    font-weight: 600;\n                }\n\n                .clearFilters {\n                    font-size: 16px;\n                }\n\n            }\n            .active-type strong {\n                flex: 0 1 auto; \n                order: 1; \n                font-weight: 600;\n                font-size: 1.2em;\n                margin: 0.3em .7em 0 0;\n                white-space: nowrap;\n            }\n            .active-type div { flex: 1 1 auto; order: 2; list-style: none; }\n            .active-type a {\n                flex: 0 1 auto;\n                order: 3;\n                text-decoration: none;\n                color: #0066CC;\n                margin-top: .3em;\n                font-weight: 100;\n                font-size: 14px;\n                white-space: nowrap;\n                &:hover, &:active, &:focus { color: #004080; }\n            }\n\n            #footer { display: none; }\n\n            @media only screen and (max-width: 768px) {\n                :host {\n                    flex: none; \n                    align-self: \n                    flex-start; \n                    float: left;\n                    border: none;\n                    margin: 0 0 1.3em 0; \n                }\n\n                .control {\n                    display: flex;\n                    flex-direction: column;\n                    width: 100%;\n                    height: 100%;\n                    padding-top: 51px;\n                    background: rgba(0,0,0,.5);\n                    border: none;\n                    z-index: 99;\n                    right: 100%;\n                    position: absolute;\n                    top: 100px;\n                }\n                .title { flex: 0 0 40px; order: 1; vertical-align: middle; }\n                .showBtn {\n                    display: block;\n                    width: 150px;\n                    height: auto;\n                    border: 1px solid var(--rhd-blue);\n                    line-height: 1.44;\n                    background-color: transparent;\n                    padding: 8px 0;\n                    color: var(--rhd-blue);\n                }\n\n                .showBtn:hover, .showBtn:focus {\n                        background-color: var(--rhd-blue);\n                        color: var(--rhd-white);\n                }\n            }\n\n        </style>\n<a class="showBtn">Show Filters</a>\n<div class="control" id="control">\n    <div class="title">'+e.title+'</div>\n    <div class="groups">\n    <slot></slot>\n    </div>\n</div>',t},e.modalTemplate=function(e){var t=document.createElement("template");return t.innerHTML='\n        <style>\n            :host {\n                display: none;\n            }\n        </style>\n<div class="cover" id="cover">\n    <div class="title">'+e.title+' <a href="#" class="cancel" id="cancel">Close</a></div>\n    <div class="groups">\n    <slot></slot>\n    </div>\n    <div class="footer">\n    <a href="#" class="clearFilters">Clear Filters</a> \n    <a href="#" class="applyFilters">Apply</a>\n    </div>\n</div>',t},e.activeTemplate=function(e){var t=document.createElement("template");return t.innerHTML='\n        <style>\n            :host {\n                grid-column: 5 / span 9;\n            }\n        </style>\n<div class="active-type">\n    <strong>'+e.title+'</strong>\n    <div class="activeFilters"></div>\n    <a href="#" class="clearFilters">Clear Filters</a>\n</div>',t},e._type="",e._title="Filter By",e._toggle=!1,e._toggleModal=e._toggleModal.bind(e),e._clearFilters=e._clearFilters.bind(e),e._addFilters=e._addFilters.bind(e),e._checkActive=e._checkActive.bind(e),e}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters!==e&&(this._filters=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggle",{get:function(){return this._toggle},set:function(e){this._toggle!==e&&(this._toggle=e,this._toggle?(this.shadowRoot.querySelector(".cover").className="cover modal",window.scrollTo(0,0),document.body.style.overflow="hidden",this.style.height=window.innerHeight+"px"):(this.shadowRoot.querySelector(".cover").className="cover",document.body.style.overflow="auto"))},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){var n=this;"active"===this.type?(t.prototype.render.call(this,this.activeTemplate(this)),this.setAttribute("data-rhd-col","5span9"),top.addEventListener("filter-item-change",this._checkActive),top.addEventListener("filter-item-init",this._checkActive),top.addEventListener("search-complete",this._checkActive),top.addEventListener("params-ready",this._checkActive),top.addEventListener("clear-filters",this._clearFilters),this._addFilters()):("modal"===this.type?t.prototype.render.call(this,this.modalTemplate(this)):(t.prototype.render.call(this,this.template(this)),this.setAttribute("data-rhd-col","span3"),this.setAttribute("data-rhd-row","span5")),this.addGroups()),this.shadowRoot.addEventListener("click",function(e){var t={bubbles:!0,composed:!0};switch(e.target.className){case"showBtn":case"cancel":case"applyFilters":e.preventDefault(),n.dispatchEvent(new CustomEvent("toggle-modal",t));break;case"clearFilters":e.preventDefault(),n.dispatchEvent(new CustomEvent("clear-filters",t));break;case"more":e.preventDefault()}}),top.addEventListener("toggle-modal",this._toggleModal)},Object.defineProperty(e,"observedAttributes",{get:function(){return["type","title","toggle"]},enumerable:!0,configurable:!0}),e.prototype.attributeChangedCallback=function(e,t,n){this[e]=n},e.prototype.addGroups=function(){for(var e=this.filters.facets,t=e.length,n=0;n<t;n++){for(var i=new a.default,o=e[n],r=o.items.length,s=0;s<r;s++){var l=new c.default;l.name=o.items[s].name,l.value=o.items[s].value,l.active=o.items[s].active,l.key=o.items[s].key,l.group=o.key,i.items.push(l)}i.key=o.key,i.name=o.name,this.shadowRoot.querySelector(".groups").appendChild(i)}},e.prototype._checkActive=function(e){e.detail&&(e.detail.facet?this.style.display=e.detail.facet.active?"block":this.style.display:0<this.shadowRoot.querySelectorAll("rhdp-search-filter-item[active]").length?this.style.display="block":this.style.display="none")},e.prototype._initActive=function(e,n,i){return e.detail&&e.detail.filters&&Object.keys(e.detail.filters).forEach(function(t){e.detail.filters[t].forEach(function(e){if(t===n&&e===i.key)return!0})}),!1},e.prototype._addFilters=function(){for(var e=this.filters.facets,t=0;t<e.length;t++)for(var n=e[t].items,i=0;i<n.length;i++){var o=new c.default;o.name=n[i].name,o.value=n[i].value,o.inline=!0,o.bubble=!1,o.key=n[i].key,o.group=e[t].key,this.shadowRoot.querySelector(".activeFilters").appendChild(o)}},e.prototype._toggleModal=function(e){"modal"===this.type&&(this.toggle=!this.toggle)},e.prototype.applyFilters=function(){this.dispatchEvent(new CustomEvent("apply-filters",{bubbles:!0,composed:!0}))},e.prototype._clearFilters=function(e){this.style.display="none"},e}(n.default),e("default",o),customElements.define("rhdp-search-filters",o)}}});